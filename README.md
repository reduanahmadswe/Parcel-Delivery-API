# Parcel Delivery API üì¶

A comprehensive, secure, and role-based backend API for a parcel delivery system built with Express.js, TypeScript, and MongoDB. This enterprise-grade system provides complete parcel tracking, user management, and administrative control features with robust security and scalable architecture.

## üåü Key Highlights

- **üîí Enterprise Security**: JWT-based dual token authentication with HTTP-only cookies
- **üé≠ Role-Based Access Control**: Granular permissions for Admin, Sender, and Receiver roles
- **üì± Real-Time Tracking**: Comprehensive parcel tracking with embedded status history
- **üèóÔ∏è Modular Architecture**: Clean, maintainable code structure following best practices
- **‚úÖ Data Validation**: Input validation using Zod schemas with detailed error handling
- **üìà Performance Optimized**: Efficient database operations with proper indexing
- **üîß Developer Friendly**: TypeScript, comprehensive error handling, and detailed documentation

## üöÄ Features

### üîê Authentication & Authorization

- **JWT-based Authentication**: Dual token system (access & refresh tokens) stored in secure HTTP-only cookies
- **Role-based Access Control**: Three distinct roles with granular permissions:
  - **Admin**: Full system access, user management, parcel oversight
  - **Sender**: Create parcels, cancel before dispatch, view own parcels
  - **Receiver**: View incoming parcels, confirm delivery, track shipments
- **Password Security**: bcrypt hashing with configurable salt rounds (default: 12)
- **Account Management**: User blocking/unblocking functionality for administrative control
- **Token Management**: Automatic token refresh, secure logout, and session management

### üì¶ Parcel Management

- **Comprehensive Tracking**: Unique tracking IDs with format `TRK-YYYYMMDD-XXXXXX`
- **Status Workflow**: Complete lifecycle management with validated transitions:
  - `requested` ‚Üí `approved` ‚Üí `dispatched` ‚Üí `in-transit` ‚Üí `delivered`
  - Cancellation and return flows with proper validation
- **Embedded History**: All status changes stored within parcel documents for optimal performance
- **Real-time Updates**: Location tracking and detailed notes for each status change
- **Fee Management**: Automatic pricing calculation based on weight, urgency, and base fees
- **Delivery Personnel**: Admin assignment and tracking of delivery staff
- **Advanced Filtering**: Search, filter, and sort parcels by multiple criteria

### üõ°Ô∏è Security Features

- **Input Validation**: Comprehensive validation using Zod schemas
- **Error Handling**: Global error handling with consistent response format
- **Access Control**: Route-level and resource-level authorization
- **Data Sanitization**: Input sanitization to prevent injection attacks
- **CORS Configuration**: Secure cross-origin resource sharing setup

### üéõÔ∏è Admin Dashboard Features

- **User Management**: Complete user lifecycle management
- **Parcel Oversight**: Full parcel management with status controls
- **Analytics**: User and parcel statistics
- **Flagging System**: Mark suspicious parcels for review
- **Hold/Block System**: Temporarily halt parcel processing

## üõ†Ô∏è Technology Stack

- **Backend**: Node.js, Express.js
- **Language**: TypeScript
- **Database**: MongoDB with Mongoose ODM
- **Authentication**: JWT (JSON Web Tokens)
- **Validation**: Zod
- **Security**: bcryptjs, CORS, HTTP-only cookies
- **Development**: ESLint, Nodemon, TypeScript

## üìã Prerequisites

- Node.js (v18.0.0 or higher)
- MongoDB (v6.0 or higher)
- npm or yarn package manager

## ‚ö° Quick Start

### 1. Clone the repository

```bash
git clone https://github.com/reduanahmadswe/Parcel-Delivery-API.git
cd Parcel-Delivery-API
```

### 2. Install dependencies

```bash
npm install
```

### 3. Environment Setup

Create a `.env` file in the root directory:

```env
NODE_ENV=development
PORT=5000
MONGODB_URI=mongodb+srv://your-username:your-password@cluster.mongodb.net/parcel-delivery

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# JWT Access Token Configuration
JWT_ACCESS_SECRET=access-token-secret-change-this-in-production
JWT_ACCESS_EXPIRES=15m

# JWT Refresh Token Configuration
JWT_REFRESH_SECRET=refresh-token-secret-change-this-in-production
JWT_REFRESH_EXPIRES=7d

BCRYPT_SALT_ROUNDS=12
FRONTEND_URL=http://localhost:3000
```

### 4. Create Admin User

```bash
npm run seed:admin
```

### 5. Development

```bash
npm run dev
```

### 6. Production Build

```bash
npm run build
npm start
```

## üåê API Endpoints

### Base URL

```
http://localhost:5000/api
```

### üîê Authentication Endpoints

| Method | Endpoint              | Description           | Access  |
| ------ | --------------------- | --------------------- | ------- |
| POST   | `/auth/register`      | Register new user     | Public  |
| POST   | `/auth/login`         | User login            | Public  |
| POST   | `/auth/logout`        | User logout           | Public  |
| POST   | `/auth/refresh-token` | Refresh access token  | Public  |
| GET    | `/auth/me`            | Get current user info | Private |

### üë§ User Management Endpoints

| Method | Endpoint                  | Description              | Access |
| ------ | ------------------------- | ------------------------ | ------ |
| GET    | `/users/profile`          | Get user profile         | User   |
| PATCH  | `/users/profile`          | Update user profile      | User   |
| GET    | `/users`                  | Get all users            | Admin  |
| GET    | `/users/stats`            | Get user statistics      | Admin  |
| GET    | `/users/:id`              | Get user by ID           | Admin  |
| PUT    | `/users/:id`              | Update user by ID        | Admin  |
| PATCH  | `/users/:id/block-status` | Toggle user block status | Admin  |
| DELETE | `/users/:id`              | Delete user              | Admin  |

### üì¶ Parcel Management Endpoints

#### Public Routes

| Method | Endpoint                     | Description                 | Access |
| ------ | ---------------------------- | --------------------------- | ------ |
| GET    | `/parcels/track/:trackingId` | Track parcel by tracking ID | Public |

#### Sender Routes

| Method | Endpoint              | Description       | Access |
| ------ | --------------------- | ----------------- | ------ |
| POST   | `/parcels`            | Create new parcel | Sender |
| PATCH  | `/parcels/cancel/:id` | Cancel parcel     | Sender |

#### Receiver Routes

| Method | Endpoint                        | Description      | Access   |
| ------ | ------------------------------- | ---------------- | -------- |
| PATCH  | `/parcels/:id/confirm-delivery` | Confirm delivery | Receiver |

#### Shared Routes (Sender & Receiver)

| Method | Endpoint                  | Description               | Access                |
| ------ | ------------------------- | ------------------------- | --------------------- |
| GET    | `/parcels/me`             | Get user's parcels        | Sender/Receiver       |
| GET    | `/parcels/:id`            | Get parcel by ID          | Sender/Receiver/Admin |
| GET    | `/parcels/:id/status-log` | Get parcel status history | Sender/Receiver/Admin |

#### Admin Routes

| Method | Endpoint                        | Description                | Access |
| ------ | ------------------------------- | -------------------------- | ------ |
| GET    | `/parcels`                      | Get all parcels            | Admin  |
| GET    | `/parcels/admin/stats`          | Get parcel statistics      | Admin  |
| PATCH  | `/parcels/:id/status`           | Update parcel status       | Admin  |
| PATCH  | `/parcels/:id/block-status`     | Toggle parcel block status | Admin  |
| PATCH  | `/parcels/:id/assign-personnel` | Assign delivery personnel  | Admin  |
| PATCH  | `/parcels/:id/flag`             | Flag/unflag parcel         | Admin  |
| PATCH  | `/parcels/:id/hold`             | Hold/unhold parcel         | Admin  |
| PATCH  | `/parcels/:id/unblock`          | Unblock parcel             | Admin  |
| PATCH  | `/parcels/:id/return`           | Return parcel              | Admin  |
| DELETE | `/parcels/:id`                  | Delete parcel              | Admin  |

## üéØ Available Scripts

```bash
# Development
npm run dev          # Start development server with hot reload
npm run build        # Build TypeScript to JavaScript
npm start            # Start production server

# Code Quality
npm run lint         # Check code for linting errors
npm run lint:fix     # Fix linting errors automatically
npm run lint:check   # Check linting with zero warnings

# Database
npm run seed:admin   # Create initial admin user

# Utilities
npm run clean        # Clean build directory
```

## üìä Data Models

### User Model

```typescript
interface IUser {
  _id: string;
  name: string;
  email: string;
  password: string;
  phone: string;
  role: "admin" | "sender" | "receiver";
  address: {
    street: string;
    city: string;
    state: string;
    zipCode: string;
    country: string;
  };
  isBlocked: boolean;
  isVerified: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

### Parcel Model

```typescript
interface IParcel {
  _id: string;
  trackingId: string;
  senderId: string;
  receiverId: string;
  senderInfo: PersonInfo;
  receiverInfo: PersonInfo;
  parcelDetails: {
    type:
      | "document"
      | "package"
      | "fragile"
      | "electronics"
      | "clothing"
      | "other";
    weight: number;
    dimensions?: { length: number; width: number; height: number };
    description: string;
    value?: number;
  };
  deliveryInfo: {
    preferredDeliveryDate?: Date;
    deliveryInstructions?: string;
    isUrgent: boolean;
  };
  fee: {
    baseFee: number;
    weightFee: number;
    urgentFee: number;
    totalFee: number;
    isPaid: boolean;
    paymentMethod?: "cash" | "card" | "online";
  };
  currentStatus:
    | "requested"
    | "approved"
    | "dispatched"
    | "in-transit"
    | "delivered"
    | "cancelled"
    | "returned";
  statusHistory: IStatusLog[];
  assignedDeliveryPersonnel?: string;
  isFlagged: boolean;
  isHeld: boolean;
  isBlocked: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

## üîí Authentication Flow

1. **Registration/Login**: User provides credentials
2. **Token Generation**: Server generates access (15min) and refresh (7d) tokens
3. **Cookie Storage**: Tokens stored as HTTP-only cookies
4. **Request Authentication**: Access token validates API requests
5. **Token Refresh**: Refresh token regenerates expired access tokens
6. **Logout**: Clears authentication cookies

## üöÄ Deployment

### Vercel (Recommended)

```bash
# Install Vercel CLI
npm i -g vercel

# Deploy
vercel --prod
```

### Traditional Hosting

```bash
# Build the project
npm run build

# Start production server
npm start
```

## üß™ Testing

Comprehensive API testing examples are available in `API_TESTING.md`. The file includes:

- Complete endpoint documentation
- Request/response examples
- Authentication flows
- Error handling scenarios



## üÜò Support

For support, email reduanahmadswe@gmail.com or create an issue in the GitHub repository.

## üôè Acknowledgments

- Express.js team for the robust web framework
- MongoDB team for the flexible database solution
- TypeScript team for type safety
- Zod team for runtime validation
- All contributors and users of this project
- **Parcel Oversight**: Advanced parcel management with bulk operations
- **Analytics**: Comprehensive statistics and reporting
- **System Monitoring**: Health checks and system status monitoring

## üìÅ Project Architecture

This project follows a modular architecture pattern with clear separation of concerns:

```
src/
‚îú‚îÄ‚îÄ modules/                  # Feature-based modular architecture
‚îÇ   ‚îú‚îÄ‚îÄ auth/                 # Authentication & authorization
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.ts    # HTTP request handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts       # Business logic layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.ts        # Route definitions
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.interface.ts     # Type definitions
‚îÇ   ‚îú‚îÄ‚îÄ user/                 # User management & profiles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.controller.ts    # User HTTP handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.service.ts       # User business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.model.ts         # Mongoose schema & model
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.interface.ts     # User type definitions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.validation.ts    # Zod validation schemas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.routes.ts        # User route definitions
‚îÇ   ‚îî‚îÄ‚îÄ parcel/               # Parcel delivery system
‚îÇ       ‚îú‚îÄ‚îÄ parcel.controller.ts  # Parcel HTTP handlers
‚îÇ       ‚îú‚îÄ‚îÄ parcel.service.ts     # Parcel business logic
‚îÇ       ‚îú‚îÄ‚îÄ parcel.model.ts       # Parcel mongoose model
‚îÇ       ‚îú‚îÄ‚îÄ parcel.interface.ts   # Parcel type definitions
‚îÇ       ‚îú‚îÄ‚îÄ parcel.validation.ts  # Parcel validation schemas
‚îÇ       ‚îî‚îÄ‚îÄ parcel.routes.ts      # Parcel route definitions
‚îú‚îÄ‚îÄ middlewares/              # Cross-cutting concerns
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts               # JWT authentication & authorization
‚îÇ   ‚îú‚îÄ‚îÄ validation.ts         # Request validation middleware
‚îÇ   ‚îú‚îÄ‚îÄ globalErrorHandler.ts # Centralized error handling
‚îÇ   ‚îî‚îÄ‚îÄ notFoundHandler.ts    # 404 route handler
‚îú‚îÄ‚îÄ config/                   # Configuration management
‚îÇ   ‚îî‚îÄ‚îÄ database.ts           # MongoDB connection & configuration
‚îú‚îÄ‚îÄ utils/                    # Utility functions & helpers
‚îÇ   ‚îú‚îÄ‚îÄ AppError.ts           # Custom error class
‚îÇ   ‚îú‚îÄ‚îÄ catchAsync.ts         # Async error handling wrapper
‚îÇ   ‚îú‚îÄ‚îÄ sendResponse.ts       # Standardized API responses
‚îÇ   ‚îú‚îÄ‚îÄ helpers.ts            # JWT utilities & ID generation
‚îÇ   ‚îú‚îÄ‚îÄ jwt.ts                # JWT token utilities
‚îÇ   ‚îî‚îÄ‚îÄ authTokens.ts         # Cookie management for tokens
‚îú‚îÄ‚îÄ types/                    # Global type definitions
‚îÇ   ‚îú‚îÄ‚îÄ express.d.ts          # Express request extensions
‚îÇ   ‚îî‚îÄ‚îÄ error.types.ts        # Error type definitions
‚îú‚îÄ‚îÄ routes/                   # Route aggregation
‚îÇ   ‚îî‚îÄ‚îÄ index.ts              # Main route registry
‚îú‚îÄ‚îÄ scripts/                  # Database utilities
‚îÇ   ‚îî‚îÄ‚îÄ seedAdmin.ts          # Admin user seeding script
‚îú‚îÄ‚îÄ app.ts                    # Express application setup
‚îî‚îÄ‚îÄ server.ts                 # Application entry point
```

## üõ† Technology Stack

| Category           | Technology          | Purpose                           |
| ------------------ | ------------------- | --------------------------------- |
| **Runtime**        | Node.js             | JavaScript runtime environment    |
| **Framework**      | Express.js          | Web application framework         |
| **Language**       | TypeScript          | Type-safe JavaScript development  |
| **Database**       | MongoDB + Mongoose  | NoSQL database with ODM           |
| **Authentication** | JWT + bcrypt        | Secure token-based authentication |
| **Validation**     | Zod                 | Runtime schema validation         |
| **HTTP Security**  | CORS, Cookie Parser | Cross-origin and cookie security  |
| **Environment**    | Dotenv              | Environment variable management   |
| **Process Mgmt**   | Nodemon             | Development auto-reload           |


## üé≠ Role-Based Access Control

### üë§ Sender Permissions

- ‚úÖ Create new parcel delivery requests
- ‚úÖ View all their created parcels
- ‚úÖ Cancel parcels (only before dispatch)
- ‚úÖ View complete status history of own parcels
- ‚úÖ Update own profile information
- ‚ùå Cannot access other users' parcels
- ‚ùå Cannot perform admin functions

### üì® Receiver Permissions

- ‚úÖ View parcels addressed to their email
- ‚úÖ Confirm delivery for in-transit parcels
- ‚úÖ Track parcels using tracking ID
- ‚úÖ View complete delivery history
- ‚úÖ Update own profile information
- ‚ùå Cannot create parcels
- ‚ùå Cannot access other users' parcels
- ‚ùå Cannot perform admin functions

### üë®‚Äçüíº Admin Permissions

- ‚úÖ **Full User Management**: View, update, block/unblock, delete users
- ‚úÖ **Complete Parcel Oversight**: View all parcels, update statuses
- ‚úÖ **Personnel Management**: Assign delivery staff to parcels
- ‚úÖ **Status Control**: Full control over parcel status transitions
- ‚úÖ **Flagging System**: Flag/unflag parcels for review
- ‚úÖ **Hold System**: Put parcels on hold temporarily
- ‚úÖ **Analytics**: Access comprehensive system statistics
- ‚úÖ **System Monitoring**: Monitor all system activities

## üìã Parcel Status Workflow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Requested  ‚îÇ‚îÄ‚îÄ‚ñ∂ ‚îÇ  Approved   ‚îÇ‚îÄ‚îÄ‚ñ∂ ‚îÇ Dispatched  ‚îÇ‚îÄ‚îÄ‚ñ∂ ‚îÇ In Transit  ‚îÇ‚îÄ‚îÄ‚ñ∂ ‚îÇ Delivered   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                    ‚îÇ                    ‚îÇ                    ‚îÇ
       ‚ñº                    ‚ñº                    ‚ñº                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Cancelled  ‚îÇ    ‚îÇ  Cancelled  ‚îÇ    ‚îÇ  Returned   ‚îÇ    ‚îÇ  Returned   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Status Descriptions & Permissions

| Status     | Description                         | Who Can Set        |
| ---------- | ----------------------------------- | ------------------ |
| Requested  | Parcel created by sender            | System (automatic) |
| Approved   | Admin approved the delivery request | Admin only         |
| Dispatched | Parcel picked up for transport      | Admin only         |
| In Transit | Parcel is being delivered           | Admin only         |
| Delivered  | Parcel successfully delivered       | Receiver or Admin  |
| Cancelled  | Delivery request cancelled          | Sender or Admin    |
| Returned   | Parcel returned to sender           | Admin only         |

## üîí Security Features

### Authentication Security

- **JWT Dual Token System**: Separate access and refresh tokens
- **HTTP-Only Cookies**: Tokens stored securely in cookies
- **Password Hashing**: bcrypt with configurable salt rounds
- **Token Expiration**: Automatic token expiration and refresh
- **Secure Logout**: Proper token invalidation

### Authorization Security

- **Role-Based Access**: Granular permissions per user role
- **Resource-Level Security**: Users can only access their own resources
- **Route Protection**: Middleware-based route authorization
- **Input Validation**: Comprehensive request validation using Zod

### Data Security

- **Input Sanitization**: Protection against injection attacks
- **Error Handling**: Secure error messages without data leakage
- **CORS Configuration**: Controlled cross-origin access
- **Environment Variables**: Sensitive data in environment configuration

## üìà Advanced Features

### üí∞ Automatic Fee Calculation

The system automatically calculates parcel fees based on:

- **Base Fee**: 50 BDT for all parcels
- **Weight-based Fee**: 20 BDT per kilogram
- **Urgent Delivery Fee**: Additional 100 BDT for urgent parcels
- **Total Calculation**: Automatic computation on parcel creation

### üè∑Ô∏è Smart Tracking System

- **Unique Tracking IDs**: Format `TRK-YYYYMMDD-XXXXXX` (e.g., TRK-20250729-ABC123)
- **Public Tracking**: No authentication required for tracking by ID
- **Complete History**: Every status change recorded with timestamps
- **Location Tracking**: Optional GPS coordinates for each update
- **Note System**: Custom notes and remarks for status changes
- **Retry Logic**: Automatic tracking ID regeneration on conflicts

### üìä Analytics & Reporting

#### User Analytics

- Total registered users by role
- User verification status tracking
- Blocked user monitoring
- Registration trends over time

#### Parcel Analytics

- Status distribution across all parcels
- Urgent vs. regular parcel ratios
- Revenue tracking and payment status
- Delivery performance metrics
- Geographic distribution analysis

### üîç Comprehensive Data Validation

#### Input Validation

- **Email**: RFC-compliant format validation
- **Phone**: International format support with regex validation
- **Addresses**: Complete address requirements with country defaults
- **Weights**: Range validation (0.1kg - 50kg)
- **Dimensions**: Positive value requirements for L√óW√óH
- **Dates**: Future date validation for delivery preferences
- **Text Fields**: Length limits and character restrictions

#### Business Logic Validation

- **Status Transitions**: Enforced workflow compliance
- **Permission Checks**: Role-based operation validation
- **Resource Ownership**: User-resource relationship verification
- **Account Status**: Blocked user operation prevention

### üõ†Ô∏è Admin Management Tools

- **Parcel Flagging**: Mark suspicious parcels for review
- **Parcel Hold System**: Temporarily suspend parcel operations
- **Bulk Operations**: Efficient management of multiple records
- **Personnel Assignment**: Delivery staff allocation and tracking
- **Force Status Changes**: Override normal workflow when necessary

## üìù Environment Variables

| Variable                 | Description               | Default                                   | Required |
| ------------------------ | ------------------------- | ----------------------------------------- | -------- |
| `NODE_ENV`               | Environment mode          | development                               | No       |
| `PORT`                   | Server port               | 5000                                      | No       |
| `MONGODB_URI`            | MongoDB connection string | mongodb://localhost:27017/parcel-delivery | Yes      |
| `JWT_SECRET`             | JWT signing secret        | -                                         | Yes      |
| `JWT_EXPIRES_IN`         | Access token expiration   | 15m                                       | No       |
| `JWT_REFRESH_EXPIRES_IN` | Refresh token expiration  | 7d                                        | No       |
| `BCRYPT_SALT_ROUNDS`     | Password hashing rounds   | 12                                        | No       |
| `FRONTEND_URL`           | Frontend application URL  | http://localhost:3000                     | No       |


## üîß Testing

For comprehensive API testing, refer to the [API_TESTING.md](./API_TESTING.md) file which includes:

- Complete endpoint documentation with examples
- Authentication flow testing
- Role-based access testing
- Error scenario testing
- Data validation testing

## üöÄ Deployment

### Production Considerations

1. **Environment Variables**: Ensure all required environment variables are set
2. **Database**: Use a production MongoDB instance (MongoDB Atlas recommended)
3. **Secrets**: Generate strong, unique JWT secrets
4. **CORS**: Configure appropriate CORS origins for your frontend
5. **Logging**: Implement proper logging for production monitoring
6. **Process Management**: Use PM2 or similar for process management


## ü§ù Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

### Development Guidelines

- Follow TypeScript best practices
- Use meaningful commit messages
- Add JSDoc comments for complex functions
- Ensure proper error handling
- Write tests for new features
- Update documentation as needed

## üìÑ License

This project is licensed under the ISC License. See the [LICENSE](LICENSE) file for details.

## üìû Support

For support, please contact the development team or create an issue in the repository.

## üîó Related Documentation

- [API Testing Guide](./API_TESTING.md) - Comprehensive API testing examples
- [Database Schema](./docs/schema.md) - Detailed database schema documentation
- [Deployment Guide](./docs/deployment.md) - Production deployment instructions

---

## üõ°Ô∏è Security Considerations

### Production Deployment

- **HTTPS Only**: Always use HTTPS in production environments
- **Environment Variables**: Never commit sensitive data to version control
- **Database Security**: Use MongoDB Atlas or secure self-hosted instances
- **Rate Limiting**: Implement rate limiting for API endpoints
- **Monitoring**: Set up logging and monitoring for suspicious activities
- **Regular Updates**: Keep dependencies updated for security patches

### Security Best Practices

- **Strong JWT Secrets**: Use cryptographically strong random secrets (256-bit recommended)
- **Token Expiration**: Use short-lived access tokens with refresh token rotation
- **Input Sanitization**: Validate and sanitize all user inputs
- **Error Handling**: Avoid exposing sensitive information in error messages
- **Access Control**: Implement principle of least privilege
- **Audit Trails**: Log all sensitive operations for security auditing

## üìú License

This project is licensed under the ISC License - see the [LICENSE](LICENSE) file for details.

## üôè Acknowledgments

- **Express.js** - Fast, unopinionated, minimalist web framework
- **MongoDB** - Document-based NoSQL database
- **TypeScript** - Typed superset of JavaScript
- **Mongoose** - Elegant MongoDB object modeling
- **Zod** - TypeScript-first schema validation
- **JWT** - JSON Web Token implementation

---

**Built with ‚ù§Ô∏è using TypeScript, Express.js, and MongoDB**

_For API testing examples and detailed endpoint documentation, see [API_TESTING.md](API_TESTING.md)_
